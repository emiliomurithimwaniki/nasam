{% extends 'base.html' %}
{% load static %}
{% block title %} | Home{% endblock %}
{% block content %}
<section class="hero gradient-blue text-white py-5">
  <div class="container py-4">
    <div class="row align-items-center g-4">
      <div class="col-lg-7 reveal reveal-left hero-reactive-bg" data-reactive-bg="{% if hero_photos and hero_photos|length > 0 %}{{ hero_photos.0.image.url }}{% elif hero and hero.hero_image %}{{ hero.hero_image.url }}{% else %}{% static 'img/hero.jpg' %}{% endif %}">
        <span class="badge rounded-pill text-bg-light text-dark mb-3">{{ hero.badge|default:'Quality • Innovation • Customer Satisfaction' }}</span>
        <h1 class="display-5 fw-bold">{{ hero.title|default:'Electrical Engineering' }} {% if hero.accent %}<span class="text-gradient">{{ hero.accent }}</span>{% else %}<span class="text-gradient">& Solar Power</span>{% endif %}</h1>
        <p class="lead mt-3">{{ hero.lead|default:'Safe, reliable, and efficient systems for homes, businesses, and industry. Delivered by certified professionals with strict adherence to IEE standards.' }}</p>
        <a class="btn btn-accent me-2" href="{{ hero.secondary_cta_url|default:'/contact/' }}"><i class="fa-solid fa-paper-plane me-1"></i>{{ hero.secondary_cta_text|default:'Request a Quote' }}</a>
        <a class="btn btn-outline-light" href="{{ hero.primary_cta_url|default:'/services/' }}"><i class="fa-solid fa-bolt me-1"></i>{{ hero.primary_cta_text|default:'Our Services' }}</a>
        <div class="d-inline-flex align-items-center ms-2 gap-2">
          <a class="btn btn-whatsapp btn-sm" href="https://wa.me/254722521752" target="_blank" rel="noopener" aria-label="Chat on WhatsApp">
            <i class="fa-brands fa-whatsapp me-1"></i>WhatsApp
          </a>
          <a class="btn btn-outline-light btn-sm" href="tel:{{ company.phones|first|default:'254722521752' }}" aria-label="Call us">
            <i class="fa-solid fa-phone me-1"></i>Call
          </a>
        </div>
      </div>
      <div class="col-lg-5 text-center reveal reveal-right">
        {% if hero_photos and hero_photos|length > 0 %}
        <div id="heroCarousel" class="carousel slide shadow rounded overflow-hidden" data-bs-ride="carousel" aria-label="Hero image carousel">
          <div class="carousel-indicators">
            {% for _ in hero_photos %}
              <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="{{ forloop.counter0 }}" class="{% if forloop.first %}active{% endif %}" aria-current="{% if forloop.first %}true{% else %}false{% endif %}" aria-label="Slide {{ forloop.counter }}"></button>
            {% endfor %}
          </div>
          <div class="carousel-inner" style="max-height: 460px;">
            {% for photo in hero_photos %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
              <img src="{{ photo.image.url }}" class="d-block w-100" alt="{{ photo.alt_text|default:photo.title|default:'Hero image' }}" style="object-fit: cover; height: 460px;">
              {% if photo.title or photo.caption %}
              <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2">
                {% if photo.title %}<h5 class="mb-1">{{ photo.title }}</h5>{% endif %}
                {% if photo.caption %}<p class="mb-0 small">{{ photo.caption }}</p>{% endif %}
              </div>
              {% endif %}
            </div>
            {% endfor %}
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
        {% else %}
        <div class="hero-photo js-hero parallax" data-bg="{% if hero and hero.hero_image %}{{ hero.hero_image.url }}{% else %}{% static 'img/hero.jpg' %}{% endif %}"></div>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="container text-center mt-4">
    <small class="opacity-75">Trusted by hospitals, commercial buildings, industries, and homeowners</small>
  </div>
  <!-- Wave divider under hero -->
  <div class="wave-divider">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 120" preserveAspectRatio="none">
      <path fill="#fff" d="M0,64L60,58.7C120,53,240,43,360,53.3C480,64,600,96,720,96C840,96,960,64,1080,48C1200,32,1320,32,1380,32L1440,32L1440,120L1380,120C1320,120,1200,120,1080,120C960,120,840,120,720,120C600,120,480,120,360,120C240,120,120,120,60,120L0,120Z"></path>
    </svg>
  </div>
  
</section>

<!-- Testimonials Carousel -->
<section class="py-5 bg-light border-top">
  <div class="container">
    <h2 class="mb-4 section-title text-center">What Our Clients Say</h2>
    <div class="glass p-4 p-md-5">
    {% if testimonials and testimonials|length > 0 %}
    <div id="testimonials" class="carousel slide" data-bs-ride="carousel" data-bs-interval="7000" data-bs-pause="hover" aria-label="Testimonials carousel">
      <div class="carousel-inner">
        {% for r in testimonials %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="d-flex flex-column gap-3">
            <div class="d-flex align-items-center gap-3">
              <div class="d-flex" aria-label="{{ r.rating }} out of 5 stars">
                {% for _ in '12345' %}
                  <i class="fa-solid fa-star{% if forloop.counter <= r.rating %} text-warning{% else %} text-secondary{% endif %}"></i>
                {% endfor %}
              </div>
              <small class="text-muted">{{ r.category.name }}</small>
            </div>
            <blockquote class="mb-0">
              <p class="lead mb-1">“{{ r.comment|default:'Great service!' }}”</p>
              <footer class="text-muted">{{ r.name|default:'Client' }}</footer>
            </blockquote>
          </div>
        </div>
        {% endfor %}
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#testimonials" data-bs-slide="prev" aria-label="Previous testimonial">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#testimonials" data-bs-slide="next" aria-label="Next testimonial">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
      </button>
    </div>
    {% else %}
      <p class="mb-3">No reviews yet. Be the first to share your experience!</p>
    {% endif %}
    <div class="text-center mt-4">
      <a class="btn btn-primary" href="/services/#categories"><i class="fa-solid fa-star me-1"></i>Rate our services</a>
    </div>
    </div>
  </div>
</section>

<section class="py-5 section-why">
  <div class="container">
    <h2 class="mb-4 section-title">Why Choose Us</h2>
    <div class="row g-4">
      <div class="col-md-4 reveal reveal-left">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <div class="icon mb-3"><i class="fa-solid fa-shield-halved"></i></div>
            <h5 class="card-title">Quality & Safety</h5>
            <p class="mb-0">IEE compliant installations with rigorous testing and commissioning.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 reveal">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <div class="icon mb-3"><i class="fa-solid fa-solar-panel"></i></div>
            <h5 class="card-title">Smart & Efficient</h5>
            <p class="mb-0">Modern solar with DC inverters to maximize energy efficiency.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 reveal">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <div class="icon mb-3"><i class="fa-solid fa-handshake-angle"></i></div>
            <h5 class="card-title">Customer First</h5>
            <p class="mb-0">Transparent process, on-time delivery, responsive support.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
