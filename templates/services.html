{% extends 'base.html' %}
{% block title %} | Services{% endblock %}
{% block content %}
<section class="py-5 bg-light border-bottom">
  <div class="container">
    <h1 class="mb-4 section-title">Our Services</h1>

    {% if categories %}
    <div id="categories" class="row g-4">
      {% for cat in categories %}
      <div class="col-lg-6 reveal">
        <div class="svc-card h-100 p-4">
          <div class="d-flex align-items-center mb-3">
            <div class="ring me-3"><span><i class="fa-solid fa-plug"></i></span></div>
            <h3 class="h5 mb-0">{{ cat.name }}</h3>
          </div>
          {% with photos=cat.photos.all %}
          {% if photos %}
          <div id="catCarousel_{{ cat.slug }}" class="carousel slide rounded overflow-hidden shadow-sm mb-3" data-bs-ride="carousel" data-bs-interval="6000" data-bs-pause="false" data-bs-wrap="true" data-bs-touch="true" aria-label="{{ cat.name }} photos carousel">
            <div class="carousel-inner">
              {% for p in photos %}
              <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <div class="ratio ratio-16x9">
                  <img src="{{ p.image.url }}" class="d-block w-100 h-100" style="object-fit:cover;" alt="{{ p.alt_text|default:p.title|default:cat.name }}">
                </div>
              </div>
              {% endfor %}
            </div>
            {# No arrows; continuous autoplay #}
          </div>
          {% endif %}
          {% endwith %}
          {% if cat.description %}
          <p class="mb-4">{{ cat.description }}</p>
          {% endif %}
          <div class="d-flex gap-2 flex-wrap">
            <a class="btn btn-accent" href="/contact/"><i class="fa-solid fa-clipboard-list me-1"></i>Get a Quote</a>
            <a class="btn btn-outline-primary" href="{% url 'service_category_detail' slug=cat.slug %}"><i class="fa-regular fa-images me-1"></i>View Gallery</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      <div class="alert alert-info">
        No service categories yet. Add some in Admin â†’ Service categories.
      </div>
    {% endif %}

    <div class="text-center mt-5">
      <a class="btn btn-accent btn-lg" href="/contact/"><i class="fa-solid fa-clipboard-list me-1"></i>Request a Quote</a>
    </div>
  </div>
  
</section>
{% endblock %}
